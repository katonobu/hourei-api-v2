# 実装ステップ1
- 本ステップでは、指定された条を基準とし、そのすべての子要素を適切に読み上げ用テキストに変換することを主目的とする。
- 以降のステップで、条以下の子要素の一部を出力指定、あるいは一部を出力抑止させることを想定している。

## 機能概要
- 指定された法令idの指定された条以下の要素から生成されるテキスト文字列を含むオブジェクトを得る。
  - このテキストは読み上げられることを想定する。
  - sentenceの前に当該テキストがどの条文であるかがわかるようにするのがポイント。

## 入力仕様
- 法令ID
- 条文指定リスト
  - 少なくとも1つ以上の整数要素を持つリスト
  - 条文中、"の"で区切られて複数の番号を持つ条文があるため、複数要素を持つ必要がある。
  - "の"の分解処理は上位側の責務であり、本処理のスコープ外である。

## 内部処理
  - 数値のリストをarticle_numsとしたとき、条文取得APIの引数eleに与える文字列は、下記とする
    - f"MainProvision-Article_{'_'.join([f'{num}' for num in article_nums])}"
  - 条文取得APIで得られたオブジェクトの要素"law_full_text"を処理し、出力仕様に応じたテキストを含むオブジェクトを返す。

## 出力仕様
- 出力はオブジェクトとする。
- オブジェクトには"texts"要素を持ち、複数行の文字列を格納する。
  - 各行の出力は下記とする。
    - 条毎に1つ
        - f'{ArticleTitle} {ArticleCaption}'
        - 例: "第三十条 失踪(そう)の宣告"
        - 各項毎に
            - f'{ArticleTitle} 第{ParagraphタグのNumアトリビュート}項 {sentence}'
            - 号がある場合
                - f'{ArticleTitle} 第{ParagraphNum}項 第{ItemTitle}号 {sentence}'
                - 号の細分以下、Subitem1～Subitem10は、インデントの深さ1～10を<X>として
                    - f'{Subitem<X-1>Title} {Subitem<X>Title} {sentence}'

    - インライン要素の扱い
        - Rubyは、Rt要素をテキストとして用いる。
        - Sub,Subは子要素をそのままテキストとして用いる。
        - Lineは、子要素がテキストの時、そのままテキストとして用いる。

## 詳細追記事項
1. 漢数字を含む条文指定文字列の解析方法は本関数の呼び出し側実施
2. 項番号は、ParagraphタグのNumアトリビュートとする。
3. 号の細分（Subitem）の出力形式について、f'{上位すぐ上の階層の項番} {本項番} {本文}'とする。
4. 表（TableStruct）、図（FigStruct）要素に遭遇した場合はその要素以下は処理対象としない。
5. List要素は 直下のListSentenceのみを処理対象とし、Sublist以下の階層は無視する（空文字列を返す）ものとする。
  - ListSentence内の子要素（SentenceやColumn）を、出現順に処理し、それぞれの処理結果を空白で連結する。
6. QuoteStruct（引用）やArithFormula（算式）は、当該要素を"引用(略)","数式(略)"という文字列として出力する。
7. API呼び出しに失敗した場合、結果オブジェクトの"texts"要素を空のリストとし、"error"要素にエラーメッセージを格納して返す。
8. 複数Sentenceで構成される条文における連接。
  - 本文の最後は一般に"。"で終わることがほとんどであるため、単純な連接による実装とする。

## 設計上の留意点
- テキスト生成時、上位側の情報を参照するため、子要素処理に適切に上位側情報を伝搬させる必要がある。
- 号の細分以下は実装が冗長になるのを許容する。
  - 今回はSubitem2までの対応とする。

## 例
- 入力
  - 法令ID:"129AC0000000089"
  - 条文指定文字列:"第30条"
- 出力
```json
{
    "texts":[
        "第三十条 失そうの宣告",
        "第三十条 第１項 不在者の生死が七年間明らかでないときは、家庭裁判所は、利害関係人の請求により、失そうの宣告をすることができる。",
        "第三十条 第２項 戦地に臨んだ者、沈没した船舶の中に在った者その他死亡の原因となるべき危難に遭遇した者の生死が、それぞれ、戦争がやんだ後、船舶が沈没した後又はその他の危難が去った後一年間明らかでないときも、前項と同様とする。"      
    ]
}
```
